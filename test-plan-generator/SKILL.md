---
name: test-plan-generator
description: 根據 PRD 文件與 Figma 設計稿，產出使用 Given-When-Then 結構的測試計畫。當使用者提供 PRD 檔案路徑並要求產出測試計畫時觸發。
disable-model-invocation: true
---

# PRD 測試計畫產生器

根據 PRD 文件與 Figma 設計稿，產出使用 Given-When-Then 結構的測試計畫。

## 輸入需求

使用者需提供：
1. **PRD 檔案路徑**（必要）— 指定 PRD markdown 檔案
2. **Figma 設計稿連結或檔案 ID**（選填，建議提供）— 用於取得 UI 元素與互動流程

$ARGUMENTS

## 執行流程

### Step 1: 讀取 PRD 文件

- 讀取指定的 PRD markdown 檔案
- 提取以下資訊：
  - **功能需求**（Feature / What 章節）
  - **目標受眾**（Audience 章節）
  - **成功指標**（Success Metrics 章節）
  - **排除範圍**（Out of Scope 章節）
- 若 PRD 中已包含驗收條件（Acceptance Criteria），直接作為測試案例基礎

### Step 2: 讀取 Figma 設計稿（如有提供）

- 透過 Figma MCP 取得設計稿內容
- 提取以下資訊：
  - 頁面結構與導航流程
  - 互動元素（按鈕、表單、下拉選單等）
  - 不同狀態的 UI 呈現（空狀態、載入中、錯誤狀態等）
  - Web 與 App 的差異設計
- 若未提供 Figma 連結，僅依據 PRD 內容產出測試計畫

### Step 3: 產出測試計畫

依據 PRD 功能需求與 Figma 設計稿，產出涵蓋以下三類測試的計畫：

#### 3.1 功能測試（Functional Test）
- 針對每個功能需求，撰寫正常流程的 Given-When-Then 測試案例
- 確保涵蓋所有主要使用者流程

#### 3.2 邊界條件測試（Edge Case Test）
- 針對每個功能，識別可能的邊界條件與異常情境：
  - 空值 / 未填寫
  - 超出限制（字數、檔案大小、數量上限）
  - 權限不足 / 未登入
  - 網路異常 / 載入失敗
  - 重複操作 / 快速連點
  - 資料不存在 / 已被刪除

#### 3.3 跨平台測試（Cross-Platform Test）
- 若功能同時支援 Web 與 App，需分別撰寫測試案例
- 關注平台差異：
  - 導航方式差異（路由 vs 頁面堆疊）
  - 互動方式差異（點擊 vs 滑動 / 長按）
  - 佈局差異（Desktop / Mobile Web / App）

## 產出格式

產出 Markdown 檔案至 **PRD 同目錄**，命名為 `[PRD 檔名]-test-plan.md`。

### 檔案結構如下：

```markdown
# [PRD 名稱] - 測試計畫

## 概覽
- **PRD 來源**：[PRD 檔案路徑]
- **Figma 來源**：[Figma 連結，若有]
- **測試範圍**：[涵蓋的功能模組]
- **平台**：Web / App
- **測試案例總數**：X 項（功能: A, 邊界: B, 跨平台: C）

---

## 功能模組 1：[模組名稱]

### 功能測試

**TC-001: [測試案例名稱]**
- **平台**：Web / App / All
- **角色**：案主 / 接案者
- **類型**：功能測試

| Step | Given | When | Then |
|------|-------|------|------|
| 1 | [前置條件] | [使用者行為] | [預期結果] |
| 2 | [前置條件] | [使用者行為] | [預期結果] |

### 邊界條件測試

**TC-002: [測試案例名稱]**
- **平台**：Web / App / All
- **角色**：案主 / 接案者
- **類型**：邊界條件

| Step | Given | When | Then |
|------|-------|------|------|
| 1 | [前置條件] | [使用者行為] | [預期結果] |

### 跨平台測試

**TC-003: [測試案例名稱 - Web vs App 差異]**
- **類型**：跨平台

| 平台 | Given | When | Then |
|------|-------|------|------|
| Web | [前置條件] | [使用者行為] | [預期結果] |
| App | [前置條件] | [使用者行為] | [預期結果] |

---

## 功能模組 2：[模組名稱]
（重複上述結構）
```

## Given-When-Then 撰寫規範

- **Given**：描述前置條件（使用者狀態、所在頁面、已有資料、裝置環境）
- **When**：描述具體操作行為（點擊、輸入、滑動、切換）
- **Then**：描述系統預期回應（UI 變化、資料更新、導航跳轉、錯誤提示）

### 撰寫原則
- 每個測試案例聚焦於「一個驗證目標」
- Given 要包含足夠的前置條件，使測試可獨立執行
- When 使用具體動詞，避免模糊描述
- Then 要有明確可驗證的預期結果
- 邊界條件案例需說明「為什麼這是邊界」
- 跨平台案例需明確標註平台差異點

## 產出後自我檢查

產出後請確認：
- [ ] 每個 PRD 功能需求都有對應的測試案例
- [ ] 涵蓋功能測試、邊界條件、跨平台三類測試
- [ ] Given-When-Then 結構完整且明確
- [ ] 測試案例編號連續且不重複（TC-001, TC-002, ...）
- [ ] 平台與角色標註正確
- [ ] 若有 Figma 設計稿，已涵蓋 UI 狀態（空狀態、錯誤狀態等）
- [ ] 檔案已存放於 PRD 同目錄下
